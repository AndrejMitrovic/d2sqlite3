<html><head>
        <META http-equiv="content-type" content="text/html; charset=utf-8">
        <title>sqlite</title>
        </head><body>
        <h1>sqlite</h1>
        <!-- Generated by Ddoc from sqlite.d -->
Simple and easy SQLite interface.
<br><br>
Objects in this interface (SqliteDatabase and SqliteQuery) are reference-counted. When the last reference goes out of scope, the objects are automatically closed and finalized. The user does not have to explicitly open or close them.

<br><br>
<b>Example:</b><br>
<pre class="d_code"><font color=green>// Open an SQLite database (here in memory)
</font><font color=blue>auto</font> db = SqliteDatabase(<font color=red>":memory:"</font>);

<font color=green>// Create a table
</font><font color=blue>auto</font> query = SqliteQuery(db,
    <font color=red>"CREATE TABLE person (
        id INTEGER PRIMARY KEY,
        last_name TEXT NOT NULL,
        first_name TEXT,
        score REAL,
        photo BLOB
    )"</font>);
query.execute;

<font color=green>// Populate the table, using bindings
</font><font color=blue>with</font> (SqliteQuery(db, <font color=red>"INSERT INTO person (last_name, first_name, score, photo)
                       VALUES (:last_name, :first_name, :score, :photo)"</font>))
{
    bind(<font color=red>":last_name"</font>, <font color=red>"Smith"</font>);
    bind(<font color=red>":first_name"</font>, <font color=red>"Robert"</font>);
    bind(<font color=red>":score"</font>, 77.5);
    <font color=blue>ubyte</font>[] photo = ...
    bind(<font color=red>":photo"</font>, photo);
    execute;

    reset; <font color=green>// need to reset the query after execution
</font>    bind(<font color=red>":last_name"</font>, <font color=red>"Doe"</font>);
    bind(<font color=red>":first_name"</font>, <font color=red>"John"</font>);
    bind(<font color=red>":score"</font>, <font color=blue>null</font>);
    bind(<font color=red>":photo"</font>, <font color=blue>null</font>);
    execute;
}

<font color=green>// Count the persons in the table
</font>query = SqliteQuery(db, <font color=red>"SELECT COUNT(*) FROM person"</font>);
writefln(<font color=red>"Number of persons: %d"</font>, query.rows.front[0].as!<font color=blue>int</font>);

<font color=green>// Fetch the data from the table
</font>query = SqliteQuery(db, <font color=red>"SELECT * FROM person"</font>);
<font color=blue>foreach</font> (row; query.rows)
{
    <font color=blue>auto</font> id = row[<font color=red>"id"</font>].as!<font color=blue>int</font>;
    <font color=blue>auto</font> name = row[<font color=red>"first_name"</font>].as!string ~ row[<font color=red>"last_name"</font>].as!string;
    <font color=blue>auto</font> score = row[<font color=red>"score"</font>].as!(<font color=blue>real</font>, 0.0); <font color=green>// score can be NULL, so provide 0.0 as
</font>                                              <font color=green>// a default value to replace NULLs
</font>    <font color=blue>auto</font> photo = row[<font color=red>"photo"</font>].as!(<font color=blue>ubyte</font>[]);
    writefln(<font color=red>"[%d] %s scores %.1f"</font>, id, name, score);
}
</pre>

<br><br>
<b>Issues:</b><br>
<ul><li>TEXT values must be UTF8-encoded.</li>
</ul>

<br><br>
<b>Todo:</b><br>
<ul><li>implement backup API: <a href="http://www.sqlite.org/backup.html">http://www.sqlite.org/backup.html</a>.</li>
</ul>

<br><br>
<b>Author:</b><br>
Nicolas Sicard.<br><br>

<dl><dt><big>class <u>SqliteException</u>: object.Exception;
</big></dt>
<dd>Exception thrown then SQLite functions return error codes.<br><br>

</dd>
<dt><big>struct <u>SqliteDatabase</u>;
</big></dt>
<dd>Once a <u>SqliteDatabase</u> object is created, the database is open and can be used directly. The database is automatically closed when the last reference to the object goes out of scope.<br><br>

<dl><dt><big>this(string <i>filename</i>);
</big></dt>
<dd>Opens a database with the name passed in the parameter.
<br><br>
If <i>filename</i> is empty, the database is open in a temporary file, and if <i>filename</i> is ":memory:", the database is open in memory (implied by SQLite).<br><br>

</dd>
<dt><big>sqlite3* <u>handle</u>();
</big></dt>
<dd>Returns the SQLite internal <u>handle</u> of the database connection.<br><br>

</dd>
</dl>
</dd>
<dt><big>template <u>isValidSqliteType</u>(T)</big></dt>
<dd>Detect whether type T is accepted as the type of a SQLite value.<br><br>

</dd>
<dt><big>struct <u>SqliteQuery</u>;
</big></dt>
<dd>Once a <u>SqliteQuery</u> object is created, the query can be used directly. The query is automatically closed when the last reference to the object goes out of scope. Use execute to execute queries that do not expect rows as their result (CREATE TABLE, INSERT, UPDATE...). Use rows without a prior call to execute for queries that expect rows as their result (SELECT).<br><br>

<dl><dt><big>void <u>bind</u>(T)(string <i>parameter</i>, T <i>value</i>);
</big></dt>
<dd>Binds a value to a named parameter in the query.<br><br>

</dd>
<dt><big>void <u>bind</u>(T)(int <i>index</i>, T <i>value</i>);
</big></dt>
<dd>Binds a value to an indexed parameter in the query.<br><br>

</dd>
<dt><big>void <u>execute</u>();
</big></dt>
<dd>Execute a query that does not expect rows as its result.<br><br>

</dd>
<dt><big>SqliteRowSet <u>rows</u>();
</big></dt>
<dd>Gets the results of a query that returns <u>rows</u>.<br><br>

</dd>
<dt><big>void <u>reset</u>();
</big></dt>
<dd>Resets a query and clears all bindings.<br><br>

</dd>
</dl>
</dd>
<dt><big>struct <u>SqliteRowSet</u>;
</big></dt>
<dd>The results of a query that returns rows, with an InputRange interface.<br><br>

<dl><dt><big>struct <u>SqliteRow</u>;
</big></dt>
<dd>A single row.<br><br>

<dl><dt><big>struct <u>SqliteColumn</u>;
</big></dt>
<dd>A single column<br><br>

<dl><dt><big>T <u>as</u>(T, T value)();
</big></dt>
<dd>Gets the value of the column converted to type T.
<br><br>
If the value is NULL, it is replaced by value.<br><br>

</dd>
<dt><big>T <u>as</u>(T)();
</big></dt>
<dd>Gets the value of the column converted to type T.
<br><br>
Same <u>as</u> above but throws an exception when a NULL value is converted into a type that cannot be <b>null</b>.<br><br>

</dd>
</dl>
</dd>
<dt><big>int <u>columnCount</u>();
</big></dt>
<dd>Gets the number of columns in this row.<br><br>

</dd>
<dt><big>SqliteColumn <u>opIndex</u>(int <i>index</i>);
</big></dt>
<dd>Gets the column at the given <i>index</i>.<br><br>

</dd>
<dt><big>SqliteColumn <u>opIndex</u>(string <i>name</i>);
</big></dt>
<dd>Gets the column from its <i>name</i>.<br><br>

</dd>
</dl>
</dd>
<dt><big>bool <u>empty</u>();
</big></dt>
<dd>Tests whether no more rows are available.<br><br>

</dd>
<dt><big>SqliteRow <u>front</u>();
</big></dt>
<dd>Gets the current row.<br><br>

</dd>
<dt><big>void <u>popFront</u>();
</big></dt>
<dd>Jumps to the next row.<br><br>

</dd>
</dl>
</dd>
</dl>

        <hr><small>Page generated by <a href="http://www.digitalmars.com/d/2.0/ddoc.html">Ddoc</a>. </small>
        </body></html>
